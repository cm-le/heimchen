.row.page-header
  .col-xs-12
    %h1 Person anzeigen
      .float-xs-right
        =link("Ändern", to: person_path(@conn, :edit, @id), class: "btn btn-outline-primary")
        %button.btn.btn-outline-primary(data-toggle="modal", data-target="#add_keyword") Stichwort hinzufügen

.modal.fade#add_keyword(tabindex="-1", role="dialog", aria-labelledby="myModalLabel", aria-hidden="true")
  .modal-dialog(role="document")
    .modal-content
      %form(action="#{person_path(@conn, :add_keyword, @id)}", method="get")
        .modal-header
          %button.close(type="button", data-dismiss="modal", aria-label="Close")
            %span(aria-hidden="true") &times;
          %h4.modal-title#addKeywordLabel Stichwort hinzufügen
        .modal-body
          %script $(function() {$.get('/person/keyword_select/', function(html){$('#keyword_select').html(html)})})
          #keyword_select
        .modal-footer
          %button.btn.btn-secondary(type="button", data-dismiss="modal") Schließen
          %button.btn.btn-primary(type="submit") Stichwort hinzufügen


.row
  .col-xs-12.col-sm-6
    %h4 
      = @person.firstname
      = @person.lastname
    %p
      geboren:
      = heimchen_show_date(@person.born_precision, @person.born_on)
      - if @person.died_precision > 0 do
        , gestorben
        = heimchen_show_date(@person.died_precision, @person.died_on)
    - if @person.comment do
      .blockquote=@person.comment
  .col-xs-12.col-sm-6
    %h4 Stichwörter  
    %ul
      - for c <- Enum.uniq(Enum.map(@keywords, &(&1.category))) do
        %li
          %b=c
          %ul
            - for k <- Enum.filter(@keywords, &(&1.category == c)) do
              %li
                = k.name
                %a{href="#{person_path(@conn, :delete_keyword, k.id)}"}
                  %i.fa.fa-remove

.float-xs-right.footer
  %i.small
    Zuletzt bearbeitet am
    =show_timestamp(@person.updated_at)
    von
    =Heimchen.User.name(@person.user)
